{% extends 'base_content.html' %}

{% block content %}
    <div class="container">
        <form method="get" action="{% url 'task_search' %}" id="taskForm">
            {% csrf_token %}

            <nav class="navbar navbar-expand-lg bg-body-tertiary">
                <div class="container-fluid">
                    <a class="navbar-brand" href="{% url 'task_search' %}">Navbar</a>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                   aria-expanded="false">
                                    Order Task
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="{% url 'task_search' %}?sort_column=due_date&sort_direction=asc">Sort
                                        by due date (asc)</a></li>
                                    <li><a class="dropdown-item" href="{% url 'task_search' %}?sort_column=due_date&sort_direction=desc">Sort
                                        by due date (desc)</a></li>
                                    <li><a class="dropdown-item" href="{% url 'task_search' %}?sort_column=priority&sort_direction=asc">Sort
                                        by priority (low)</a></li>
                                    <li><a class="dropdown-item" href="{% url 'task_search' %}?sort_column=priority&sort_direction=desc">Sort
                                        by priority (high)</a></li>
                                </ul>
                            </li>
                        </ul>

                        <input class="form-control me-2" name="q" type="search" placeholder="Search"
                               aria-label="Search">
                        <button class="btn btn-outline-success" type="submit">Search</button>
                    </div>
                </div>
            </nav>
        </form>

        <table class="table table-striped">
            <thead>
            <tr>
                <th scope="col">Task name</th>
                <th scope="col">Description</th>
                <th scope="col">Due date</th>
                <th scope="col">Priority</th>
            </tr>
            </thead>
            <tbody>
            {% for task in data %}
                <tr>
                    <td>{{ task.name }}</td>
                    <td style="max-width:420px;word-wrap:break-word;">{{ task.description }}</td>
                    <td>{{ task.due_date }}</td>
                    <td>{{ task.priority }}</td>
                </tr>
            {% endfor %}
            {% if no_tasks_found %}
                <tr>
                    <td colspan="3">No tasks found.</td>
                </tr>
            {% endif %}
            </tbody>
        </table>
    </div>
{% endblock %}
